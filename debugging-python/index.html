<!DOCTYPE html>
<html>
<head>
  <title>Better Command Line Debugging with Python – Dorian Brown – Finding signal and escaping the noise</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="How to automatically create an interactive python shell when errors occur in your script." />
    <meta property="og:description" content="How to automatically create an interactive python shell when errors occur in your script." />
    
    <meta name="author" content="Dorian Brown" />

    
    <meta property="og:title" content="Better Command Line Debugging with Python" />
    <meta property="twitter:title" content="Better Command Line Debugging with Python" />
    

  <!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css"
      integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
<!-- JQuery latest -->
<script src="//code.jquery.com/jquery-latest.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<!-- Bootstrap -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js"
        integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
        crossorigin="anonymous"></script>
<!-- add after bootstrap.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script>
<link rel="alternate" type="application/rss+xml" title="Dorian Brown - Finding signal and escaping the noise"
      href="/feed.xml"/>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<!--Custom CSS>-->
<link rel="stylesheet" type="text/css" href="/style.css"/>
<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
        type="text/javascript"></script>
<!-- Photo Gallery -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.js" type="text/javascript"></script>
<script src="/assets/javascript/jqPhotoSwipe.min.js"></script>
<!-- Fonts Import -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"> 
<!-- Mathjax Stuff -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)'], ['$$','$$']]}});
</script>
<script type="text/javascript">
    (function($, window) {
      var adjustAnchor = function() {
          var $anchor = $(':target'),
                  fixedElementHeight = 125;
          if ($anchor.length > 0) {
            window.scrollTo(0, $anchor.offset().top - fixedElementHeight);
          }
      };
      $(window).on('hashchange load', function() {
          adjustAnchor();
      });
  })(jQuery, window);

<!-- Hiding header on scroll -->
</script>
<script src="/assets/javascript/headroom.min.js"></script>

  
  <!-- Stub here for jekyll-seo-tag plugin -->
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Better Command Line Debugging with Python | Dorian Brown</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Better Command Line Debugging with Python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to automatically create an interactive python shell when errors occur in your script." />
<meta property="og:description" content="How to automatically create an interactive python shell when errors occur in your script." />
<link rel="canonical" href="https://dorianbrown.dev/debugging-python/" />
<meta property="og:url" content="https://dorianbrown.dev/debugging-python/" />
<meta property="og:site_name" content="Dorian Brown" />
<meta property="og:image" content="https://dorianbrown.dev/assets/images/pydebug/debug.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-07T00:00:00+01:00" />
<script type="application/ld+json">
{"image":"https://dorianbrown.dev/assets/images/pydebug/debug.png","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://dorianbrown.dev/debugging-python/"},"url":"https://dorianbrown.dev/debugging-python/","headline":"Better Command Line Debugging with Python","dateModified":"2019-01-07T00:00:00+01:00","datePublished":"2019-01-07T00:00:00+01:00","description":"How to automatically create an interactive python shell when errors occur in your script.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body data-spy="scroll" data-target="#toc" data-offset="140">
<div class="wrapper-masthead">
  <header class="masthead clearfix">
    <a href="/" class="site-avatar"><img src="/assets/images/logo.png"/></a>

    <div class="site-info">
      <h1 data-toc-skip class="site-name"><a href="/">Dorian Brown</a></h1>
      <p class="site-description">Finding signal and escaping the noise</p>
    </div>

    <nav>
      <a href="/">Blog</a>
      <a href="/categories/">Categories</a>
      <a href="/photography/">Photography</a>
      <a href="/about">About</a>
      <button class="btn btn-light" id="subscribe-button">Subscribe</button>
    </nav>
  </header>
</div>

<div id="not-header">
  <div class="container">
    <div class="row">
  <div class="col-lg-2">
    
      <nav id="toc" data-toggle="toc" class="sticky-top"></nav>
    
    
  </div>
  <div id="content" class="mx-auto col-lg-8">
    <article class="post">
  
  <figure class="title-figure">
    <img class="title-img" src="/assets/images/pydebug/debug.png">
    <div class="title-text"> Better Command Line Debugging with Python </div>
  </figure>
  

  <div class="date">
    January  7, 2019
  </div>

  <div class="post-categories">
    <b>Categories: </b>
    <br>
    
    
    <a href="/categories/#Programming">Programming</a>
    
    
  </div>

  <div class="entry">
    <h2 id="debugging-the-hard-way">Debugging the Hard Way</h2>

<p>For those of you who are terminal fanatics, and love running their code from the command line, debugging can sometimes be a pain. Often my debugging workflow would have been (when not working in PyCharm), reading the error, finding the file and line number, opening the respective script and adding a <code class="language-plaintext highlighter-rouge">pdb.set_trace</code> statement, and then rerunning the script.</p>

<p>This long process doesn’t just take up some precious time, but it interrupts your mental flow. So maybe there’s a better way…</p>

<h2 id="post-mortem-debugging">Post Mortem Debugging</h2>

<p>This <a href="https://stackoverflow.com/questions/242485/starting-python-debugger-automatically-on-error">stackoverflow discussion</a> gives a great solution to our problem. All you have to do is run your problematic script in the following way:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="monokai"><code>python <span class="nt">-m</span> pdb <span class="nt">-c</span> <span class="k">continue </span>error.py
</code></pre></div></div>

<p>This will run the <code class="language-plaintext highlighter-rouge">error.py</code> script, and if any errors are encountered it stops and launches an interactive python shell at the moment where the error happens.</p>

<p>Here’s an example of the output:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="monokai"><code>Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"/home/dorian/miniconda3/lib/python3.7/pdb.py"</span>, line 1697, <span class="k">in </span>main
    pdb._runscript<span class="o">(</span>mainpyfile<span class="o">)</span>
  File <span class="s2">"/home/dorian/miniconda3/lib/python3.7/pdb.py"</span>, line 1566, <span class="k">in </span>_runscript
    self.run<span class="o">(</span>statement<span class="o">)</span>
  File <span class="s2">"/home/dorian/miniconda3/lib/python3.7/bdb.py"</span>, line 585, <span class="k">in </span>run
    <span class="nb">exec</span><span class="o">(</span>cmd, globals, locals<span class="o">)</span>
  File <span class="s2">"&lt;string&gt;"</span>, line 1, <span class="k">in</span> &lt;module&gt;
  File <span class="s2">"/home/dorian/error.py"</span>, line 3, <span class="k">in</span> &lt;module&gt;
    def throw_error<span class="o">()</span>:
  File <span class="s2">"/home/dorian/error.py"</span>, line 5, <span class="k">in </span>throw_error
    1 + my_list
TypeError: unsupported operand <span class="nb">type</span><span class="o">(</span>s<span class="o">)</span> <span class="k">for</span> +: <span class="s1">'int'</span> and <span class="s1">'list'</span>
Uncaught exception. Entering post mortem debugging
Running <span class="s1">'cont'</span> or <span class="s1">'step'</span> will restart the program
<span class="o">&gt;</span> /home/dorian/error.py<span class="o">(</span>5<span class="o">)</span>throw_error<span class="o">()</span>
-&gt; 1 + my_list
<span class="o">(</span>Pdb<span class="o">)</span> 
</code></pre></div></div>

<p>This is great! Although we still have to rerun the script, we no longer need to dive into the code and set our breakpoints with <code class="language-plaintext highlighter-rouge">pdb.set_trace</code>.</p>

<h2 id="less-typing-with-bash-aliases">Less typing with bash aliases</h2>

<p>Although using this saves some steps, we still need to remember this pretty verbose command. If you aren’t already familiar with bash aliases, this is as good a time as any to start using them.</p>

<p>All you need to do is add the following line to either your <code class="language-plaintext highlighter-rouge">~/.bashrc</code> or <code class="language-plaintext highlighter-rouge">~/.bash_aliases</code> file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="monokai"><code><span class="nb">alias </span><span class="nv">pydebug</span><span class="o">=</span><span class="s2">"python -m pdb -c continue"</span>
</code></pre></div></div>

<p>Now instead of typing that whole string of commands, we can just call <code class="language-plaintext highlighter-rouge">pydebug error.py</code> and we get the same debugging magic.</p>

<p>Remember that you need to reload your <code class="language-plaintext highlighter-rouge">.bashrc</code> file before your aliases work. Just run <code class="language-plaintext highlighter-rouge">source .bashrc</code> and you’re ready to go</p>

<h2 id="adding-some-functionality-to-pdb">Adding some functionality to pdb</h2>

<p>Most of you probably don’t work in the basic python shell too much, and I personally am pretty hopeless without intelligent code completion. If you want all these wonderful things in this debugging shell, you’re in luck! You just need to replace <code class="language-plaintext highlighter-rouge">pdb</code> with <code class="language-plaintext highlighter-rouge">ipdb</code> and you get an IPython shell instead of the basic python one. Although <code class="language-plaintext highlighter-rouge">pdb</code> is included with python itself, <code class="language-plaintext highlighter-rouge">ipdb</code> needs to be pip installed.</p>

  </div>

  <hr style="margin-top: 3rem;">

  <h3 data-toc-skip>Sharing is caring.</h3>
  <div class="a2a_kit a2a_kit_size_30 a2a_default_style" style="margin: 0rem 0rem;">
  <a class="a2a_button_twitter a2a_counter"></a>
  <a class="a2a_button_linkedin a2a_counter"></a>
  <a class="a2a_button_hacker_news a2a_counter"></a>
  <a class="a2a_button_whatsapp a2a_counter"></a>
  <a class="a2a_button_reddit a2a_counter"></a>
  <a class="a2a_button_facebook a2a_counter"></a>
  </div>

  <div class="wrapper">
  <h3 data-toc-skip> Did you like the article? Subscribe for more.</h3>
      <form action="https://dev.us20.list-manage.com/subscribe/post-json?u=fb1deb852e0da99410d8eb6b2&amp;id=8acc3cf1bd&c=?"
          method="get" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate">
          <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email Address here" required>
          <div style="position: absolute; left: -5000px;" aria-hidden="true">
              <input type="text" name="b_e44c1f194bec93e238615469e_f6f826e769" tabindex="-1" value="">
          </div>
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-secondary">
          <div id="subscribe-result">
          </div>
      </form>
</div>

<script>
  $(document).ready(function () {
    var $form = $('#mc-embedded-subscribe-form')
    if ($form.length > 0) {
      $('form input[type="submit"]').bind('click', function (event) {
        if (event) event.preventDefault()
        register($form)
      })
    }
  })

  function register($form) {
    $('#mc-embedded-subscribe').val('Sending...');
    $.ajax({
      type: $form.attr('method'),
      url: $form.attr('action'),
      data: $form.serialize(),
      cache: false,
      dataType: 'json',
      contentType: 'application/json; charset=utf-8',
      error: function (err) { alert('Could not connect to the registration server. Please try again later.') },
      success: function (data) {
        $('#mc-embedded-subscribe').val('Subscribe')
        if (data.result === 'success') {
          // Yeahhhh Success
          console.log(data.msg)
          $('#mc-embedded-subscribe').removeClass("btn-secondary").addClass("btn-success");
          $('#mc-embedded-subscribe').val('Success!')
          $('#mce-EMAIL').css('borderColor', '#ffffff')
          $('#subscribe-result').css('color', 'rgb(53, 114, 210)')
          $('#subscribe-result').html('<p>Thank you for subscribing.</p>')
          $('#mce-EMAIL').val('')
        } else {
          // Something went wrong, do something to notify the user.
          console.log(data.msg)
          $('#mce-EMAIL').css('borderColor', '#ff8282')
          $('#subscribe-result').css('color', '#ff8282')
          $('#subscribe-result').html('<p>' + data.msg + '</p>')
        }
      }
    })
  };
</script>


  <script async src="https://static.addtoany.com/menu/page.js"></script>
  <script>
    var a2a_config = a2a_config || {};
    a2a_config.counts = { recover_domain: 'dorianbrown.github.io' };
  </script>

</article>

  </div>
</div>

  </div>

  <div class="wrapper-footer">
    <div class="container">
      <footer class="footer">
        <a href="mailto:dorianstuartbrown@gmail.com"><i class="svg-icon email"></i></a>
<a href="https://github.com/dorianbrown"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/doriansbrown"><i class="svg-icon linkedin"></i></a>
<a href="http://stackoverflow.com/users/1415371/ballzoffury?tab=profile"><i class="svg-icon stackoverflow"></i></a>

      </footer>
    </div>
  </div>
</div>

<!-- Lightgallery call -->
<script type="text/javascript">
  $(document).ready(function () {
    $(function(){

      $('a').hover(function(e){

          $(this).attr('data-title', $(this).attr('title'));
          $(this).removeAttr('title');

      },
      function(e){

          $(this).attr('title', $(this).attr('data-title'));

      });
    });
    //By default, plugin uses `data-fancybox-group` attribute to create galleries.
    $(".fancybox").jqPhotoSwipe({
      galleryOpen: function (gallery) {
        //with `gallery` object you can access all methods and properties described here http://photoswipe.com/documentation/api.html
        //console.log(gallery);
        //console.log(gallery.currItem);
        //console.log(gallery.getCurrentIndex());
        //gallery.zoomTo(1, {x:gallery.viewportSize.x/2,y:gallery.viewportSize.y/2}, 500);
        gallery.toggleDesktopZoom();
      }
    });
    //This option forces plugin to create a single gallery and ignores `data-fancybox-group` attribute.
    $(".forcedgallery > a").jqPhotoSwipe({
      forceSingleGallery: true
    });
  });
</script>
  
<script type="text/javascript">
  $(document).ready(function(){
    $(".wrapper-masthead").each(function(){
      var headroom = new Headroom(this);
      headroom.init();
    })
  })
</script>

<script type="text/javascript">
  $(document).ready(function () {
  });
</script>

<script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/unique-methods/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script>
<script type="text/javascript">
  function showSubscribeModal() {
    window.dojoRequire(["mojo/signup-forms/Loader"], 
      function(L) { 
        L.start({
          "baseUrl":"mc.us20.list-manage.com",
          "uuid":"fb1deb852e0da99410d8eb6b2",
          "lid":"8acc3cf1bd",
          "uniqueMethods":true
      }) 
      document.cookie = 'MCPopupClosed=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;';
      document.cookie = 'MCPopupSubscribed=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;';
    })
  }

  $('#subscribe-button').click(showSubscribeModal)
</script>



	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-107934583-2', 'auto');
		ga('send', 'pageview', {
		  'page': '/debugging-python/',
		  'title': 'Better Command Line Debugging with Python'
		});
	</script>
	<!-- End Google Analytics -->



</body>
</html>
